## S1-T13A â€” Install Supabase SDK

**Why:** Basalang frontend requires read-only access to Supabase (public flags, config, metadata). We integrate the Supabase JS SDK to enable typed access from the client.

**Branch:** phase/1

**Actions Taken:**
- Created `pnpm-workspace.yaml` to formally register monorepo workspaces
- Renamed `frontend/package.json` workspace from `"frontend"` â†’ `"@basalang/web"` to fix `--filter` targeting
- Installed `@supabase/supabase-js` via scoped command:
  ```bash
  cd /workspaces/basalang
  pnpm --filter @basalang/web add @supabase/supabase-js

Verified install success:

"@supabase/supabase-js": "^2.57.0"

---

## S1-T13B â€” Create Supabase Client Wrapper

**Why:** To centralize Supabase read-only access for use across frontend pages, while enforcing type safety and singleton usage.

**Branch:** phase/1

**Steps:**
- Created new workspace: `/packages/shared`
  - Initialized with `pnpm init`
  - Renamed to `"@basalang/shared"`
- Added root `pnpm-workspace.yaml` and `package.json` to enable workspace linkage
- Patched missing `tsconfig.json` at root and `/shared`
- Installed required dependencies:
  - `@supabase/supabase-js`
  - `@types/node`
- Created `/packages/shared/supabase.ts`:
  - Validates `NEXT_PUBLIC_SUPABASE_URL` and `...ANON_KEY`
  - Exports singleton Supabase client
- Created `/packages/shared/index.ts` with `.js` extension in NodeNext import
- Ran `pnpm build` â€” âœ… passed with no warnings

**Artifacts:**
- `/packages/shared/supabase.ts`
- `/packages/shared/index.ts`
- `/packages/shared/package.json`
- `/tsconfig.json` (root)

**Outcome:**
- Supabase client is now reusable across frontend
- Shared package fully integrated with monorepo

## S1-T13C â€” Inject Supabase Env Vars

**Why:** The frontend Supabase client requires public project credentials (URL + anon key) for typed API access using the singleton client.

**Steps:**
- Created Supabase project under org: `Basalang Cloud`
- Retrieved:
  - `NEXT_PUBLIC_SUPABASE_URL`
  - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- Created `/frontend/.env.local`
- Added and verified env vars
- Ran `pnpm build` â€” âœ… passed with no runtime errors

**Outcome:**
- Environment fully wired up to Supabase
- Shared `supabase.ts` now functional and connected

### âœ… S1-T13D: Supabase Connectivity Test

- ğŸ”— Test URL: https://2d7127282500.ngrok-free.app/test-supabase
- ğŸ” Used `supabase.from('config').select('*')` to validate DB connectivity
- âœ… Table was created and seeded via Supabase SQL editor
- âœ… Response rendered correctly in browser and curl
- âš  Required schema cache refresh to resolve PGRST205
- ğŸ§ª Verified from container via ngrok, resolving container â†’ internet access issue
- ğŸ“¸ Screenshot Confirmed (ID: `file-CityjoPEtrPTjP1K2rN5Xz`)
- âœ… Task complete and production-verified




