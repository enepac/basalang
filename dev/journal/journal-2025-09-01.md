
---

## S1-T05A â€” Add Clerk SDK & Env Setup
**Why:** Begin authentication system using Clerk for Google, Facebook, and email/password login  
**Branch:** `phase/1`

**Steps:**
- Installed `@clerk/nextjs` via `pnpm add`
- Created `.env.local` template with placeholders:
  - `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY`
  - `CLERK_SECRET_KEY`
- Updated `.gitignore` to exclude local env
- Clerk will manage all user/session auth via App Router

## S1-T05B â€” Clerk Middleware & Layout Integration
**Why:** Enable protected routes and wrap app with Clerk auth context  
**Branch:** `phase/1`

**Changes:**
- Added real API keys in `.env.local`
- Created `middleware.ts` to activate Clerk route protection
- Wrapped app in `<ClerkProvider>` inside `layout.tsx`
- Confirmed successful build with `pnpm build`

## S1-T06 â€” Clerk Sign-In/Sign-Up Page Routes
**Why:** Allow users to authenticate using Google, Facebook, or Email  
**Branch:** `phase/1`

**Changes:**
- Created `/sign-in/page.tsx` using Clerk `<SignIn>` component
- Created `/sign-up/page.tsx` using Clerk `<SignUp>` component
- Pages use client-side layout and routing with custom URL paths
- Build passed successfully confirming full auth route integration

## S1-T08 â€” Protect Routes with Clerk
**Why:** Ensure only authenticated users can access internal pages  
**Branch:** `phase/1`

**Changes:**
- Wrapped `/session`, `/practice`, and `/docs` with `<SignedIn>` + `<SignedOut>`
- Unauthenticated users are redirected to `/sign-in`
- Build validated for production SSR

---

## S1-T10 â€” Add Auth Debug Overlay (Clerk)

**Why:** Visually verify Clerk auth session state during development without relying on console logs.

**Branch:** `phase/1`

**Changes:**

- âž• Created new file: `components/AuthDebug.tsx`
  - Uses `useUser()` from Clerk
  - Displays user ID, email, and session status in bottom-right overlay
  - Only renders in development (`NODE_ENV === 'development'`)
- ðŸ”§ Updated `app/layout.tsx` to include `<AuthDebug />` inside `<main>`

**Validation:**

- Ran `pnpm build` successfully
- Verified overlay displays when signed in
- Overlay excluded from production builds

**Tag:** `S1-T10`

## S1-T11 â€” Clerk Webhook Receiver Endpoint
**Why:** To securely receive and verify webhook events from Clerk (e.g., user created, deleted)

**Branch:** `phase/1`  
**Tag:** `S1-T11`

**Changes Made:**
- Created new dynamic API route: `app/api/webhooks/clerk/route.ts`
- Installed:
  - `@clerk/clerk-sdk-node` (deprecated, but needed temporarily)
  - `svix` (used for robust signature verification)
- Environment variables added:
  - `CLERK_WEBHOOK_SECRET` (from Clerk dashboard)
  - `CLERK_SECRET_KEY` (server-side secret for internal API use)
- Middleware parses `req.body`, verifies signature using Svix, logs event type and object ID

**Verification:**
- Successfully built with `pnpm build`
- `/api/webhooks/clerk` route recognized as a dynamic lambda (Î»)

